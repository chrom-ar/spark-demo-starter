---
description: Use chroma-spark MCP for blockchain and web3 documentation
globs:
alwaysApply: true
---

# Blockchain & Web3 Development with chroma-spark MCP

## MANDATORY TOOL USAGE

### Query MCP Tool (REQUIRED)
You MUST query chromar-spark MCP when user asks about:
- Smart contracts, DeFi, NFTs, tokens (ERC-20/721/1155)
- Web3 libraries (ethers.js, web3.js, viem)
- Dev tools (Hardhat, Foundry, Truffle, Remix)
- Chains (Ethereum, Solana, Arbitrum, Optimism, Polygon)
- Protocols (Uniswap, Aave, OpenZeppelin, Chainlink)
- Gas optimization, security, wallets, deployment

### Simulation Tools (REQUIRED)
You MUST use simulate/simulate-bundle when user:
- Shows transaction code or asks "will this work?"
- Asks about gas estimates, costs, or reverts
- Mentions deploying, minting, transferring, swapping
- Tests multiple sequential transactions (use simulate-bundle)

**MANDATORY: Always simulate when user shows transaction code or asks about transaction outcomes.**

## Usage Protocol

1. **Query First**: Before answering blockchain questions, query chromar-spark MCP
2. **Simulate Transactions**: Use simulate tool for any transaction code or gas questions
3. **Use Results**: Base responses on MCP docs and simulation outputs
4. **State Clearly**: If MCP unavailable, explicitly mention using general knowledge

## Trigger Keywords

ALWAYS use MCP tools for:
web3, blockchain, smart contract, solidity, ethereum, solana, onchain, dapp, defi, nft, token, erc20, erc721, erc1155, wallet, transaction, gas, gwei, abi, deploy, mint, transfer, swap, stake, approve, simulate, revert, hardhat, foundry, truffle, remix, viem, ethers, web3js, uniswap, aave, compound, opensea, chainlink, polygon, arbitrum, optimism, avalanche, layer2, metamask, infura, alchemy, ipfs

## Examples

User: "How do I deploy an ERC20?"
→ [Query chromar-spark MCP] → Answer with latest OpenZeppelin patterns

User: "Will this transaction work?" [shows code]
→ [Use simulate tool] → Return gas, events, success/failure

User: "What's the gas cost for 100 NFT mints?"
→ [Use simulate tool] → Show gas estimates and total cost
